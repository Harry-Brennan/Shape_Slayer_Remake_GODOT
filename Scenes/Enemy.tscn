[gd_scene load_steps=8 format=3 uid="uid://cgn22jkyy1u3n"]

[ext_resource type="Script" uid="uid://c1vdplhkn8nb8" path="res://Scripts/Combat/Enemy/Enemy.gd" id="1_ahauh"]
[ext_resource type="Script" uid="uid://c3d2myj2pwqfq" path="res://Scripts/Combat/Health.gd" id="1_x5orj"]
[ext_resource type="Script" uid="uid://bxvnsi144darq" path="res://Scripts/Collision/CollisionMatcher.gd" id="2_pbkhf"]
[ext_resource type="Script" uid="uid://brot81lsfnn7l" path="res://Scripts/Collision/Hitbox.gd" id="3_ghpk5"]
[ext_resource type="Script" uid="uid://c6g0cur5w4w7e" path="res://Scripts/Collision/Hurtbox.gd" id="4_h34gq"]
[ext_resource type="Script" uid="uid://c6xpeycdfakql" path="res://Scripts/Combat/Enemy/Enemy_SM.gd" id="4_x7uyr"]
[ext_resource type="Script" uid="uid://csqyj5cmgj58q" path="res://Scripts/Combat/Bullets/Shoot.gd" id="7_r243p"]

[node name="Enemy Body" type="CharacterBody2D"]
collision_layer = 2
collision_mask = 8
script = ExtResource("1_ahauh")

[node name="Health" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("1_x5orj")

[node name="Collision_Matcher" type="Node" parent="." node_paths=PackedStringArray("polygon_2d", "collision_polygons_to_update")]
script = ExtResource("2_pbkhf")
polygon_2d = NodePath("../Enemy Shape")
collision_polygons_to_update = [NodePath("../Enemy Collision"), NodePath("../HitBox/Hitbox Collision"), NodePath("../HurtBox/Hurtbox Collision")]

[node name="Enemy_State_Machine" type="Node" parent="."]
script = ExtResource("4_x7uyr")
can_shoot = true

[node name="Enemy Collision" type="CollisionPolygon2D" parent="."]
rotation = 1.5708
polygon = PackedVector2Array(0, 0, 30, 45, 0, -45, -30, 45)

[node name="Enemy Shape" type="Polygon2D" parent="."]
rotation = 1.5708
polygon = PackedVector2Array(0, 0, 30, 45, 0, -45, -30, 45)

[node name="HitBox" type="Area2D" parent="."]
rotation = 1.5708
collision_layer = 2
collision_mask = 8
script = ExtResource("3_ghpk5")

[node name="Hitbox Collision" type="CollisionPolygon2D" parent="HitBox"]
polygon = PackedVector2Array(0, 0, 30, 45, 0, -45, -30, 45)

[node name="HurtBox" type="Area2D" parent="."]
rotation = 1.5708
collision_layer = 0
collision_mask = 5
script = ExtResource("4_h34gq")

[node name="Hurtbox Collision" type="CollisionPolygon2D" parent="HurtBox"]
polygon = PackedVector2Array(0, 0, 30, 45, 0, -45, -30, 45)

[node name="Shoot" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(45, 0)
script = ExtResource("7_r243p")
is_enemy = true
shoot_cooldown_length = 0.5

[connection signal="health_depleted" from="Health" to="." method="_on_health_health_depleted"]
